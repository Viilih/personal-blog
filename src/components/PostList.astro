---
import BlogPost from "./BlogPost.astro";

interface Props {
  posts: Array<{
    id: string;
    data: {
      title: string;
      pubDate: Date;
      draft: boolean;
    };
    _type?: "article" | "note" | "weekly";
  }>;
}

const currentLang = Astro.currentLocale || "en";
const { posts } = Astro.props;

const getPostUrl = (post: any, lang: string) => {
  if (post._type === "note") return `/${lang}/notes/${post.id}`;
  if (post._type === "weekly") return `/${lang}/learning/weekly/${post.id}`;
  return `/${lang}/blog/${post.id}`;
};
---

<ul>
  {
    posts.map((post) => {
      return (
        <BlogPost
          postTitle={post.data.title}
          url={getPostUrl(post, currentLang)}
          pubDate={post.data.pubDate}
          postType={post._type}
        />
      );
    })
  }
</ul>

<style>
  ul {
    width: 100%;
    display: flex;
    gap: 16px;
    flex-direction: column;
    padding-left: 0;
    margin-top: 0;
  }

  

  @media (max-width: 768px) {
    ul {
      gap: 48px;
    }
  
  }  
</style>
