---
import { getCollection } from "astro:content";
import GoBackButton from "components/GoBackButton.astro";
import BaseLayout from "layouts/BaseLayout.astro";
import PostList from "../../../../components/PostList.astro";

const posts = await getCollection("pt-br-weekly", (post) => !post.data.draft);

const sortedPosts = posts
  .sort((a, b) => {
    const dateA = new Date(a.data.pubDate).getTime();
    const dateB = new Date(b.data.pubDate).getTime();
    return dateB - dateA;
  })
  .map(post => ({ ...post, _type: 'weekly' as const }));
---

<BaseLayout>
  <main class="weekly-container">
    <GoBackButton />
    <section class="weekly">
      <h1>Semanal</h1>
      <p>Estudos, reflex√µes e ideias semanais</p>
      <PostList posts={sortedPosts} />
    </section>
  </main>
</BaseLayout>

<style>
  .weekly-container {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .weekly h1 {
    margin-bottom: 1rem;
  }

  .weekly p {
    margin-bottom: 2rem;
    color: var(--text-secondary);
  }
</style>
